{% extends 'base.html' %}
{% load static %}
{% block titulo %}
<title>{{ noticia.titulo }}</title>
{% endblock %}
{% block navegacion %}
{% include 'navegacion.html' %}
{% endblock %}
{% block contenido %}
{% if user.is_staff %}
<div class="dropdown">
    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
        Administrar
    </button>
    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
        <li><a class="dropdown-item" href="{% url 'apps.noticias:actualizar_noticia' noticia.pk %}">Modificar noticia</a></li>
        <li><a class="dropdown-item" href="{% url 'apps.noticias:eliminar_noticia' noticia.pk %}">Eliminar noticia</a></li>
    </ul>
</div>
{% endif %}
<section class="image1 cid-tf6nPGwDQN" id="image1-q">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-12 col-lg-6">
                <div class="image-wrapper">
                    {% if noticia.imagen %}
                    <img src="{{ noticia.imagen.url }}" class="d-block w-100">
                    {% else %}
                    <img src="{% static 'img/img_libros/el_principito.jpeg' %}">
                    {% endif %}
                    <p class="mbr-description mbr-fonts-style pt-2 align-center display-4" style="font-size: 0.9em;">{{ noticia.fecha_agregado }}</p>
                </div>
            </div>
            <div class="col-12 col-lg">
                <div class="text-wrapper" style="text-align: center;">
                    <h2 class="mbr-section-title mbr-fonts-style mb-3 display-5"><strong>{{ noticia.titulo }}</strong></h2>
                    <h4 class="mbr-section-title mbr-fonts-style mb-3"><i>{{ noticia.autor }}</i></h4>
                    <p class="mbr-text mbr-fonts-style display-7">{{ noticia.nota }}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="comentarios-section" style="text-align: center; margin-top: 30px;">
        <h3>Comentarios ({{ comentarios.count }})</h3>
        <div class="comentarios-list" style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
            {% include 'comentarios/listar_comentarios.html' %}
        </div>
    </div>
    <div class="mb-3 display-7" style="text-align: center; margin-top: 20px;">
        <h4>AÃ±adir tu comentario:</h4>
        {% include 'comentarios/crear_comentario.html' %}
    </div>
</section>
<style>
    body {
        background-color: #121212;
        color: #ffffff;
        font-family: 'Arial', sans-serif;
    }
    .image-wrapper img {
        border-radius: 8px;
        max-width: 100%;
        height: auto;
    }
    .text-wrapper {
        background-color: #1c1c1c;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .dropdown-menu {
        background-color: #1c1c1c;
        color: #ffffff;
    }
    .dropdown-item {
        color: #ffffff;
    }
    .dropdown-item:hover {
        background-color: #4b6cb7;
    }
    .opinion-card {
        transition: transform 0.3s;
        width: 100%;
    }
    .opinion-card:hover {
        transform: scale(1.05);
    }
    .form-input {
        display: flex;
        justify-content: center;
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var dropdowns = document.querySelectorAll('.dropdown-toggle');
        dropdowns.forEach(function(dropdown) {
            dropdown.addEventListener('click', function(e) {
                e.preventDefault();
                var menu = dropdown.nextElementSibling;
                if (menu.classList.contains('show')) {
                    menu.classList.remove('show');
                } else {
                    menu.classList.add('show');
                }
            });
        });
    });
</script>
{% endblock %}
